/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/bodymovin@4.13.0/player/js/elements/canvasElements/CVShapeElement.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function CVShapeElement(t,e,s){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this._parent.constructor.call(this,t,e,s)}createElement(CVBaseElement,CVShapeElement),CVShapeElement.prototype.transformHelper={opacity:1,mat:new Matrix,matMdf:!1,opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,!0)},CVShapeElement.prototype.createStyleElement=function(t,e){var s={data:t,type:t.ty,elements:[]},r={};if("fl"!=t.ty&&"st"!=t.ty||(r.c=PropertyFactory.getProp(this,t.c,1,255,e),r.c.k||(s.co="rgb("+bm_floor(r.c.v[0])+","+bm_floor(r.c.v[1])+","+bm_floor(r.c.v[2])+")")),r.o=PropertyFactory.getProp(this,t.o,0,.01,e),"st"==t.ty){if(s.lc=this.lcEnum[t.lc]||"round",s.lj=this.ljEnum[t.lj]||"round",1==t.lj&&(s.ml=t.ml),r.w=PropertyFactory.getProp(this,t.w,0,null,e),r.w.k||(s.wi=r.w.v),t.d){var a=PropertyFactory.getDashProp(this,t.d,"canvas",e);r.d=a,r.d.k||(s.da=r.d.dasharray,s.do=r.d.dashoffset)}}else s.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(s),r.style=s,r},CVShapeElement.prototype.createGroupElement=function(t){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t,e){return{transform:{mat:new Matrix,opacity:1,matMdf:!1,opMdf:!1,op:PropertyFactory.getProp(this,t.o,0,.01,e),mProps:PropertyFactory.getProp(this,t,2,null,e)},elements:[]}},CVShapeElement.prototype.createShapeElement=function(t,e){var s={nodes:[],trNodes:[],tr:[0,0,0,0,0,0]},r=4;"rc"==t.ty?r=5:"el"==t.ty?r=6:"sr"==t.ty&&(r=7),s.sh=ShapePropertyFactory.getShapeProp(this,t,r,e),this.shapes.push(s.sh),this.addShapeToModifiers(s),jLen=this.stylesList.length;var a=!1,i=!1;for(j=0;j<jLen;j+=1)this.stylesList[j].closed||(this.stylesList[j].elements.push(s),"st"===this.stylesList[j].type?a=!0:i=!0);return s.st=a,s.fl=i,s},CVShapeElement.prototype.reloadShapes=function(){this.firstFrame=!0;var t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.dynamicProperties,!0);var e;t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},CVShapeElement.prototype.searchShapes=function(t,e,s,r,a){var i,o,p,h,l=t.length-1,n=[],m=[];for(i=l;i>=0;i-=1){if((h=this.searchProcessedElement(t[i]))?e[i]=s[h-1]:t[i]._render=a,"fl"==t[i].ty||"st"==t[i].ty)h?e[i].style.closed=!1:e[i]=this.createStyleElement(t[i],r),n.push(e[i].style);else if("gr"==t[i].ty){if(h)for(p=e[i].it.length,o=0;o<p;o+=1)e[i].prevViewData[o]=e[i].it[o];else e[i]=this.createGroupElement(t[i]);this.searchShapes(t[i].it,e[i].it,e[i].prevViewData,r,a)}else if("tr"==t[i].ty)h||(e[i]=this.createTransformElement(t[i],r));else if("sh"==t[i].ty||"rc"==t[i].ty||"el"==t[i].ty||"sr"==t[i].ty)h||(e[i]=this.createShapeElement(t[i],r));else if("tm"==t[i].ty||"rd"==t[i].ty){if(h)(y=e[i]).closed=!1;else{var y=ShapeModifiers.getModifier(t[i].ty);y.init(this,t[i],r),e[i]=y,this.shapeModifiers.push(y)}m.push(y)}else"rp"==t[i].ty&&(h?(y=e[i]).closed=!0:(y=ShapeModifiers.getModifier(t[i].ty),e[i]=y,y.init(this,t,i,e,r),this.shapeModifiers.push(y),a=!1),m.push(y));this.addProcessedElement(t[i],i+1)}for(l=n.length,i=0;i<l;i+=1)n[i].closed=!0;for(l=m.length,i=0;i<l;i+=1)m[i].closed=!0},CVShapeElement.prototype.addShapeToModifiers=IShapeElement.prototype.addShapeToModifiers,CVShapeElement.prototype.renderModifiers=IShapeElement.prototype.renderModifiers,CVShapeElement.prototype.lcEnum=IShapeElement.prototype.lcEnum,CVShapeElement.prototype.ljEnum=IShapeElement.prototype.ljEnum,CVShapeElement.prototype.searchProcessedElement=IShapeElement.prototype.searchProcessedElement,CVShapeElement.prototype.addProcessedElement=IShapeElement.prototype.addProcessedElement,CVShapeElement.prototype.renderFrame=function(t){!1!==this._parent.renderFrame.call(this,t)&&(this.transformHelper.mat.reset(),this.transformHelper.opacity=this.finalTransform.opacity,this.transformHelper.matMdf=!1,this.transformHelper.opMdf=this.finalTransform.opMdf,this.renderModifiers(),this.renderShape(this.transformHelper,null,null,!0),this.data.hasMask&&this.globalData.renderer.restore(!0))},CVShapeElement.prototype.renderShape=function(t,e,s,r){var a,i,o,p;if(!e)for(e=this.shapesData,i=this.stylesList.length,a=0;a<i;a+=1)this.stylesList[a].d="",this.stylesList[a].mdf=!1;for(s||(s=this.itemsData),o=t,a=i=e.length-1;a>=0;a-=1)if("tr"==e[a].ty){o=s[a].transform;var h=s[a].transform.mProps.v.props;if(o.matMdf=o.mProps.mdf,o.opMdf=o.op.mdf,(p=o.mat).cloneFromProps(h),t){var l=t.mat.props;o.opacity=t.opacity,o.opacity*=s[a].transform.op.v,o.matMdf=!!t.matMdf||o.matMdf,o.opMdf=!!t.opMdf||o.opMdf,p.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])}else o.opacity=o.op.o}else"sh"==e[a].ty||"el"==e[a].ty||"rc"==e[a].ty||"sr"==e[a].ty?this.renderPath(e[a],s[a],o):"fl"==e[a].ty?this.renderFill(e[a],s[a],o):"st"==e[a].ty?this.renderStroke(e[a],s[a],o):"gr"==e[a].ty?this.renderShape(o,e[a].it,s[a].it):e[a].ty;if(r){i=this.stylesList.length;var n,m,y,f,d,c,v,E=this.globalData.renderer,S=this.globalData.canvasContext;for(E.save(),E.ctxTransform(this.finalTransform.mat.props),a=0;a<i;a+=1)if(("st"!==(v=this.stylesList[a].type)||0!==this.stylesList[a].wi)&&this.stylesList[a].data._render){for(E.save(),d=this.stylesList[a].elements,"st"===v?(S.strokeStyle=this.stylesList[a].co,S.lineWidth=this.stylesList[a].wi,S.lineCap=this.stylesList[a].lc,S.lineJoin=this.stylesList[a].lj,S.miterLimit=this.stylesList[a].ml||0):S.fillStyle=this.stylesList[a].co,E.ctxOpacity(this.stylesList[a].coOp),"st"!==v&&S.beginPath(),m=d.length,n=0;n<m;n+=1){for("st"===v&&(S.beginPath(),this.stylesList[a].da?(S.setLineDash(this.stylesList[a].da),S.lineDashOffset=this.stylesList[a].do,this.globalData.isDashed=!0):this.globalData.isDashed&&(S.setLineDash(this.dashResetter),this.globalData.isDashed=!1)),f=(c=d[n].trNodes).length,y=0;y<f;y+=1)"m"==c[y].t?S.moveTo(c[y].p[0],c[y].p[1]):"c"==c[y].t?S.bezierCurveTo(c[y].p1[0],c[y].p1[1],c[y].p2[0],c[y].p2[1],c[y].p3[0],c[y].p3[1]):S.closePath();"st"===v&&S.stroke()}"st"!==v&&S.fill(this.stylesList[a].r),E.restore()}E.restore(),this.firstFrame&&(this.firstFrame=!1)}},CVShapeElement.prototype.renderPath=function(t,e,s){var r,a,i,o;if(s.matMdf||e.sh.mdf||this.firstFrame){var p=e.sh.paths,h=s.mat;o=p._length;var l=e.trNodes;for(l.length=0,i=0;i<o;i+=1){var n=p.shapes[i];if(n&&n.v){for(r=n._length,a=1;a<r;a+=1)1==a&&l.push({t:"m",p:h.applyToPointArray(n.v[0][0],n.v[0][1],0)}),l.push({t:"c",p1:h.applyToPointArray(n.o[a-1][0],n.o[a-1][1],0),p2:h.applyToPointArray(n.i[a][0],n.i[a][1],0),p3:h.applyToPointArray(n.v[a][0],n.v[a][1],0)});1==r&&l.push({t:"m",p:h.applyToPointArray(n.v[0][0],n.v[0][1],0)}),n.c&&r&&(l.push({t:"c",p1:h.applyToPointArray(n.o[a-1][0],n.o[a-1][1],0),p2:h.applyToPointArray(n.i[0][0],n.i[0][1],0),p3:h.applyToPointArray(n.v[0][0],n.v[0][1],0)}),l.push({t:"z"})),e.lStr=l}}if(e.st)for(a=0;a<16;a+=1)e.tr[a]=s.mat.props[a];e.trNodes=l}},CVShapeElement.prototype.renderFill=function(t,e,s){var r=e.style;(e.c.mdf||this.firstFrame)&&(r.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||s.opMdf||this.firstFrame)&&(r.coOp=e.o.v*s.opacity)},CVShapeElement.prototype.renderStroke=function(t,e,s){var r=e.style,a=e.d;a&&(a.mdf||this.firstFrame)&&(r.da=a.dasharray,r.do=a.dashoffset),(e.c.mdf||this.firstFrame)&&(r.co="rgb("+bm_floor(e.c.v[0])+","+bm_floor(e.c.v[1])+","+bm_floor(e.c.v[2])+")"),(e.o.mdf||s.opMdf||this.firstFrame)&&(r.coOp=e.o.v*s.opacity),(e.w.mdf||this.firstFrame)&&(r.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemData.length=0,this._parent.destroy.call(this._parent)};
//# sourceMappingURL=/sm/94aed264e1ec7b2f9664dca17f4c518ea255b79ff2cd191cd41b573a710c019e.map