/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/bodymovin@4.13.0/player/js/elements/canvasElements/CVTextElement.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function CVTextElement(t,e,a){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this._parent.constructor.call(this,t,e,a)}createElement(CVBaseElement,CVTextElement),extendPrototype(ITextElement,CVTextElement),CVTextElement.prototype.tHelper=document.createElement("canvas").getContext("2d"),CVTextElement.prototype.createElements=function(){this._parent.createElements.call(this)},CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=Array.apply(null,{length:t.l?t.l.length:0});var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var a=!1;t.sc&&(a=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var s,l,i=this.globalData.fontManager.getFontByName(t.f),r=t.l,o=this.mHelper;this.stroke=a,this.values.fValue=t.s+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,l=t.t.length;var n,h,p,f,v,c,g,u,y,m,x=this.data.singleShape,d=t.tr/1e3*t.s,T=0,b=0,C=!0,D=0;for(s=0;s<l;s+=1){for(h=(n=this.globalData.fontManager.getCharData(t.t.charAt(s),i.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&n.data||{},o.reset(),x&&r[s].n&&(T=-d,b+=t.yOffset,b+=C?1:0,C=!1),g=(v=h.shapes?h.shapes[0].it:[]).length,o.scale(t.s/100,t.s/100),x&&this.applyTextPropertiesToMatrix(t,o,r[s].line,T,b),y=Array.apply(null,{length:g}),c=0;c<g;c+=1){for(f=v[c].ks.k.i.length,u=v[c].ks.k,m=[],p=1;p<f;p+=1)1==p&&m.push(o.applyToX(u.v[0][0],u.v[0][1],0),o.applyToY(u.v[0][0],u.v[0][1],0)),m.push(o.applyToX(u.o[p-1][0],u.o[p-1][1],0),o.applyToY(u.o[p-1][0],u.o[p-1][1],0),o.applyToX(u.i[p][0],u.i[p][1],0),o.applyToY(u.i[p][0],u.i[p][1],0),o.applyToX(u.v[p][0],u.v[p][1],0),o.applyToY(u.v[p][0],u.v[p][1],0));m.push(o.applyToX(u.o[p-1][0],u.o[p-1][1],0),o.applyToY(u.o[p-1][0],u.o[p-1][1],0),o.applyToX(u.i[0][0],u.i[0][1],0),o.applyToY(u.i[0][0],u.i[0][1],0),o.applyToX(u.v[0][0],u.v[0][1],0),o.applyToY(u.v[0][0],u.v[0][1],0)),y[c]=m}x&&(T+=r[s].l,T+=d),this.textSpans[D]?this.textSpans[D].elem=y:this.textSpans[D]={elem:y},D+=1}},CVTextElement.prototype.renderFrame=function(t){if(!1!==this._parent.renderFrame.call(this,t)){var e,a,s,l,i,r,o=this.canvasContext,n=this.finalTransform.mat.props;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(n),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),o.font=this.values.fValue,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var h,p=this.textAnimator.renderedLetters,f=this.textProperty.currentData.l;a=f.length;var v,c,g=null,u=null,y=null;for(e=0;e<a;e+=1)if(!f[e].n){if((h=p[e])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(h.p),this.globalData.renderer.ctxOpacity(h.o)),this.fill){for(h&&h.fc?g!==h.fc&&(g=h.fc,o.fillStyle=h.fc):g!==this.values.fill&&(g=this.values.fill,o.fillStyle=this.values.fill),l=(v=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<l;s+=1)for(r=(c=v[s]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),i=2;i<r;i+=6)this.globalData.canvasContext.bezierCurveTo(c[i],c[i+1],c[i+2],c[i+3],c[i+4],c[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(h&&h.sw?y!==h.sw&&(y=h.sw,o.lineWidth=h.sw):y!==this.values.sWidth&&(y=this.values.sWidth,o.lineWidth=this.values.sWidth),h&&h.sc?u!==h.sc&&(u=h.sc,o.strokeStyle=h.sc):u!==this.values.stroke&&(u=this.values.stroke,o.strokeStyle=this.values.stroke),l=(v=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),s=0;s<l;s+=1)for(r=(c=v[s]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),i=2;i<r;i+=6)this.globalData.canvasContext.bezierCurveTo(c[i],c[i+1],c[i+2],c[i+3],c[i+4],c[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}h&&this.globalData.renderer.restore()}this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}};
//# sourceMappingURL=/sm/1eb71d21360070b43346e275448fd4eadb592ee6a0ae9655631a671a871d728a.map