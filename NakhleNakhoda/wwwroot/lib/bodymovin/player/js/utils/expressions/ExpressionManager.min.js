/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/bodymovin@4.13.0/player/js/utils/expressions/ExpressionManager.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null;function duplicatePropertyValue(e,t){if(t=t||1,"number"==typeof e||e instanceof Number)return e*t;if(e.i)return JSON.parse(JSON.stringify(e));var r,n=Array.apply(null,{length:e.length}),a=e.length;for(r=0;r<a;r+=1)n[r]=e[r]*t;return n}function shapesEqual(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var r,n=e._length;for(r=0;r<n;r+=1)if(e.v[r][0]!==t.v[r][0]||e.v[r][1]!==t.v[r][1]||e.o[r][0]!==t.o[r][0]||e.o[r][1]!==t.o[r][1]||e.i[r][0]!==t.i[r][0]||e.i[r][1]!==t.i[r][1])return!1;return!0}function $bm_neg(e){var t=typeof e;if("number"===t||"boolean"===t||e instanceof Number)return-e;if(e.constructor===Array){var r,n=e.length,a=[];for(r=0;r<n;r+=1)a[r]=-e[r];return a}}function sum(e,t){var r=typeof e,n=typeof t;if("string"===r||"string"===n)return e+t;if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&("number"===n||"boolean"===n||"string"===n||t instanceof Number))return e+t;if(e.constructor===Array&&("number"===n||"boolean"===n||"string"===n||t instanceof Number))return e[0]=e[0]+t,e;if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&t.constructor===Array)return t[0]=e+t[0],t;if(e.constructor===Array&&t.constructor===Array){for(var a=0,o=e.length,i=t.length,l=[];a<o||a<i;)("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a]instanceof Number)?l[a]=e[a]+t[a]:l[a]=null==t[a]?e[a]:e[a]||t[a],a+=1;return l}return 0}var add=sum;function sub(e,t){var r=typeof e,n=typeof t;if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&("number"===n||"boolean"===n||"string"===n||t instanceof Number))return"string"===r&&(e=parseInt(e)),"string"===n&&(t=parseInt(t)),e-t;if(e.constructor===Array&&("number"===n||"boolean"===n||"string"===n||t instanceof Number))return e[0]=e[0]-t,e;if(("number"===r||"boolean"===r||"string"===r||e instanceof Number)&&t.constructor===Array)return t[0]=e-t[0],t;if(e.constructor===Array&&t.constructor===Array){for(var a=0,o=e.length,i=t.length,l=[];a<o||a<i;)("number"==typeof e[a]||e[a]instanceof Number)&&("number"==typeof t[a]||t[a],1)?l[a]=e[a]-t[a]:l[a]=null==t[a]?e[a]:e[a]||t[a],a+=1;return l}return 0}function mul(e,t){var r,n,a,o=typeof e,i=typeof t;if(("number"===o||"boolean"===o||"string"===o||e instanceof Number)&&("number"===i||"boolean"===i||"string"===i||t instanceof Number))return e*t;if(e.constructor===Array&&("number"===i||"boolean"===i||"string"===i||t instanceof Number)){for(a=e.length,r=Array.apply(null,{length:a}),n=0;n<a;n+=1)r[n]=e[n]*t;return r}if(("number"===o||"boolean"===o||"string"===o||e instanceof Number)&&t.constructor===Array){for(a=t.length,r=Array.apply(null,{length:a}),n=0;n<a;n+=1)r[n]=e*t[n];return r}return 0}function div(e,t){var r,n,a,o=typeof e,i=typeof t;if(("number"===o||"boolean"===o||"string"===o||e instanceof Number)&&("number"===i||"boolean"===i||"string"===i||t instanceof Number))return e/t;if(e.constructor===Array&&("number"===i||"boolean"===i||"string"===i||t instanceof Number)){for(a=e.length,r=Array.apply(null,{length:a}),n=0;n<a;n+=1)r[n]=e[n]/t;return r}if(("number"===o||"boolean"===o||"string"===o||e instanceof Number)&&t.constructor===Array){for(a=t.length,r=Array.apply(null,{length:a}),n=0;n<a;n+=1)r[n]=e/t[n];return r}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e)),"string"==typeof t&&(t=parseInt(t)),e%t}function clamp(e,t,r){if(t>r){var n=r;r=t,t=n}return Math.min(Math.max(e,t),r)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);t||(t=helperLengthArray);var r,n=Math.min(e.length,t.length),a=0;for(r=0;r<n;r+=1)a+=Math.pow(t[r]-e[r],2);return Math.sqrt(a)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,r,n=e[0],a=e[1],o=e[2],i=Math.max(n,a,o),l=Math.min(n,a,o),s=(i+l)/2;if(i==l)t=r=0;else{var u=i-l;switch(r=s>.5?u/(2-i-l):u/(i+l),i){case n:t=(a-o)/u+(a<o?6:0);break;case a:t=(o-n)/u+2;break;case o:t=(n-a)/u+4}t/=6}return[t,r,s,e[3]]}function hslToRgb(e){var t,r,n,a=e[0],o=e[1],i=e[2];if(0==o)t=r=n=i;else{function l(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var s=i<.5?i*(1+o):i+o-i*o,u=2*i-s;t=l(u,s,a+1/3),r=l(u,s,a),n=l(u,s,a-1/3)}return[t,r,n,e[3]]}function linear(e,t,r,n,a){if(void 0===n||void 0===a)return linear(e,0,1,t,r);if(e<=t)return n;if(e>=r)return a;var o=r===t?0:(e-t)/(r-t);if(!n.length)return n+(a-n)*o;var i,l=n.length,s=Array.apply(null,{length:l});for(i=0;i<l;i+=1)s[i]=n[i]+(a[i]-n[i])*o;return s}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var r,n=t.length;e||(e=Array.apply(null,{length:n}));var a=Array.apply(null,{length:n}),o=BMMath.random();for(r=0;r<n;r+=1)a[r]=e[r]+o*(t[r]-e[r]);return a}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,r,n){t=t&&t.length?t:e,r=r&&r.length?r:e;var a=shape_pool.newShape(),o=e.length;for(a.setPathData(n,o),i=0;i<o;i+=1)a.setTripleAt(e[i][0],e[i][1],r[i][0]+e[i][0],r[i][1]+e[i][1],t[i][0]+e[i][0],t[i][1]+e[i][1],i,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,content,effect,thisComp=elem.comp,thisProperty=property;elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,loopIn,loop_in,loopOut,loop_out,toWorld,fromWorld,fromComp,fromCompToSurface,anchorPoint,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,fn=new Function,fn=eval("[function(){"+val+";if($bm_rt.__shapeObject){this.v=shape_pool.clone($bm_rt.v);}else{this.v=$bm_rt;}}]")[0],bindedFn=fn.bind(this),numKeys=property.kf?data.k.length:0,wiggle=function(e,t){var r,n,a=this.pv.length?this.pv.length:1,o=Array.apply(null,{len:a});for(n=0;n<a;n+=1)o[n]=0;var i=Math.floor(5*time);for(r=0,n=0;r<i;){for(n=0;n<a;n+=1)o[n]+=-t+2*t*BMMath.random();r+=1}var l=5*time,s=l-Math.floor(l),u=Array.apply({length:a});if(a>1){for(n=0;n<a;n+=1)u[n]=this.pv[n]+o[n]+(-t+2*t*BMMath.random())*s;return u}return this.pv+o[0]+(-t+2*t*BMMath.random())*s}.bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut);var loopInDuration=function(e,t){return loopIn(e,t,!0)}.bind(this),loopOutDuration=function(e,t){return loopOut(e,t,!0)}.bind(this);this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,textIndex,textTotal,selectorValue;function lookAt(e,t){var r=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],n=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads;return[-Math.atan2(r[1],r[2])/degToRads,n,0]}function easeOut(e,t,r){return-(r-t)*e*(e-2)+t}function nearestKey(e){var t,r,n,a=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(r=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)r=1,n=data.k[0].t;else{for(t=0;t<a-1;t+=1){if(e===data.k[t].t){r=t+1,n=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(r=t+2,n=data.k[t+1].t):(r=t+1,n=data.k[t].t);break}}-1===r&&(r=t+1,n=data.k[t].t)}else r=0,n=0;var o={};return o.index=r,o.time=n/elem.comp.globalData.frameRate,o}function key(e){var t,r,n,a;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);for(e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate},n=(a=e!==data.k.length-1||data.k[e].h?data.k[e].s:data.k[e-1].e).length,r=0;r<n;r+=1)t[r]=a[r];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random());function executeExpression(){if(_needsRandom&&seedRandom(randSeed),this.frameExpressionId!==elem.globalData.frameId||"textSelector"===this.type){if(this.lock)return this.v=duplicatePropertyValue(this.pv,this.mult),!0;var e,t;if("textSelector"===this.type&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),anchorPoint=transform.anchorPoint),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),this.lock=!0,this.getPreValue&&this.getPreValue(),value=this.pv,time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),bindedFn(),this.frameExpressionId=elem.globalData.frameId,this.mult)if("number"==typeof this.v||this.v instanceof Number||this.v instanceof String||"string"==typeof this.v)this.v*=this.mult;else if(1===this.v.length)this.v=this.v[0]*this.mult;else for(t=this.v.length,value===this.v&&(this.v=2===t?[value[0],value[1]]:[value[0],value[1],value[2]]),e=0;e<t;e+=1)this.v[e]*=this.mult;if(1===this.v.length&&(this.v=this.v[0]),"number"==typeof this.v||this.v instanceof Number||this.v instanceof String||"string"==typeof this.v)this.lastValue!==this.v&&(this.lastValue=this.v,this.mdf=!0);else if(this.v._length)shapesEqual(this.v,this.localShapeCollection.shapes[0])||(this.mdf=!0,this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(shape_pool.clone(this.v)));else for(t=this.v.length,e=0;e<t;e+=1)this.v[e]!==this.lastValue[e]&&(this.lastValue[e]=this.v[e],this.mdf=!0);this.lock=!1}}return executeExpression}return ob.initiateExpression=initiateExpression,ob}();
//# sourceMappingURL=/sm/1d6ec9ebc3fcc6bb9deaa5a587b5ff3639cb18589a553d7914e7f1d8cc543ea1.map