/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/bodymovin@4.13.0/player/js/utils/shapes/RepeaterModifier.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function RepeaterModifier(){}RepeaterModifier.prototype.processKeys=function(t){if(this.elem.globalData.frameId!==this.frameId||t){this.mdf=!!t;var r,i=this.dynamicProperties.length;for(r=0;r<i;r+=1)this.dynamicProperties[r].getValue(),this.dynamicProperties[r].mdf&&(this.mdf=!0)}},RepeaterModifier.prototype.initModifierProperties=function(t,r){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,r.c,0,null,this.dynamicProperties),this.o=PropertyFactory.getProp(t,r.o,0,null,this.dynamicProperties),this.tr=PropertyFactory.getProp(t,r.tr,2,null,this.dynamicProperties),this.data=r,this.dynamicProperties.length||this.getValue(!0),this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,r,i,e,s,a){var h=a?-1:1,o=e.s.v[0]+(1-e.s.v[0])*(1-s),p=e.s.v[1]+(1-e.s.v[1])*(1-s);t.translate(e.p.v[0]*h*s,e.p.v[1]*h*s,e.p.v[2]),r.translate(-e.a.v[0],-e.a.v[1],e.a.v[2]),r.rotate(-e.r.v*h*s),r.translate(e.a.v[0],e.a.v[1],e.a.v[2]),i.translate(-e.a.v[0],-e.a.v[1],e.a.v[2]),i.scale(a?1/o:o,a?1/p:p),i.translate(e.a.v[0],e.a.v[1],e.a.v[2])},RepeaterModifier.prototype.init=function(t,r,i,e,s){this.elem=t,this.arr=r,this.pos=i,this.elemsData=e,this._currentCopies=0,this._elements=[],this._groups=[],this.dynamicProperties=[],this.frameId=-1,this.initModifierProperties(t,r[i]);for(;i>0;)i-=1,this._elements.unshift(r[i]),1;this.dynamicProperties.length?(this.k=!0,s.push(this)):this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var r,i=t.length;for(r=0;r<i;r+=1)t[r]._processed=!1,"gr"===t[r].ty&&this.resetElements(t[r].it)},RepeaterModifier.prototype.cloneElements=function(t){t.length;var r=JSON.parse(JSON.stringify(t));return this.resetElements(r),r},RepeaterModifier.prototype.changeGroupRender=function(t,r){var i,e=t.length;for(i=0;i<e;i+=1)t[i]._render=r,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,r)},RepeaterModifier.prototype.processShapes=function(t){if(this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.dynamicProperties.length||t||(this.mdf=!1),this.mdf)){var r=Math.ceil(this.c.v);if(this._groups.length<r){for(;this._groups.length<r;){var i={it:this.cloneElements(this._elements),ty:"gr"};i.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:0,ix:6,k:0},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,i),this._groups.splice(0,0,i),this._currentCopies+=1}this.elem.reloadShapes()}var e,s,a=0;for(e=0;e<=this._groups.length-1;e+=1)s=a<r,this._groups[e]._render=s,this.changeGroupRender(this._groups[e].it,s),a+=1;this._currentCopies=r,this.elem.firstFrame=!0;var h=this.o.v,o=h%1,p=h>0?Math.floor(h):Math.ceil(h),n=(this.tr.v.props,this.pMatrix.props),f=this.rMatrix.props,l=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m=0;if(h>0){for(;m<p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),m+=1;o&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,o,!1),m+=o)}else if(h<0){for(;m>p;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),m-=1;o&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-o,!0),m-=o)}e=1===this.data.m?0:this._currentCopies-1;var d=1===this.data.m?1:-1;for(a=this._currentCopies;a;){if(0!==m){(0!==e&&1===d||e!==this._currentCopies-1&&-1===d)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15]),this.matrix.transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);var M=(c=(x=this.elemsData[e].it)[x.length-1].transform.mProps.v.props).length;for(g=0;g<M;g+=1)c[g]=this.matrix.props[g];this.matrix.reset()}else{this.matrix.reset();var x,c,g;M=(c=(x=this.elemsData[e].it)[x.length-1].transform.mProps.v.props).length;for(g=0;g<M;g+=1)c[g]=this.matrix.props[g]}m+=1,a-=1,e+=d}}},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier);
//# sourceMappingURL=/sm/d641c486c5d77c59f8da1e860063cfd3dd6180a2c531731f3bfa49512137414c.map