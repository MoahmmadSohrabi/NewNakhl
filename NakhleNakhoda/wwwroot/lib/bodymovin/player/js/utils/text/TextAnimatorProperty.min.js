/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/bodymovin@4.13.0/player/js/utils/text/TextAnimatorProperty.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function TextAnimatorProperty(t,a,e){this.mdf=!1,this._firstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._dynamicProperties=[],this._textData=t,this._renderType=a,this._elem=e,this._animatorsData=Array.apply(null,{length:this._textData.a.length}),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1}TextAnimatorProperty.prototype.searchProperties=function(t){var a,e,s,i=this._textData.a.length,r=PropertyFactory.getProp;for(a=0;a<i;a+=1)e={a:{},s:{}},"r"in(s=this._textData.a[a]).a&&(e.a.r=r(this._elem,s.a.r,0,degToRads,this._dynamicProperties)),"rx"in s.a&&(e.a.rx=r(this._elem,s.a.rx,0,degToRads,this._dynamicProperties)),"ry"in s.a&&(e.a.ry=r(this._elem,s.a.ry,0,degToRads,this._dynamicProperties)),"sk"in s.a&&(e.a.sk=r(this._elem,s.a.sk,0,degToRads,this._dynamicProperties)),"sa"in s.a&&(e.a.sa=r(this._elem,s.a.sa,0,degToRads,this._dynamicProperties)),"s"in s.a&&(e.a.s=r(this._elem,s.a.s,1,.01,this._dynamicProperties)),"a"in s.a&&(e.a.a=r(this._elem,s.a.a,1,0,this._dynamicProperties)),"o"in s.a&&(e.a.o=r(this._elem,s.a.o,0,.01,this._dynamicProperties)),"p"in s.a&&(e.a.p=r(this._elem,s.a.p,1,0,this._dynamicProperties)),"sw"in s.a&&(e.a.sw=r(this._elem,s.a.sw,0,0,this._dynamicProperties)),"sc"in s.a&&(e.a.sc=r(this._elem,s.a.sc,1,0,this._dynamicProperties)),"fc"in s.a&&(e.a.fc=r(this._elem,s.a.fc,1,0,this._dynamicProperties)),"fh"in s.a&&(e.a.fh=r(this._elem,s.a.fh,0,0,this._dynamicProperties)),"fs"in s.a&&(e.a.fs=r(this._elem,s.a.fs,0,.01,this._dynamicProperties)),"fb"in s.a&&(e.a.fb=r(this._elem,s.a.fb,0,.01,this._dynamicProperties)),"t"in s.a&&(e.a.t=r(this._elem,s.a.t,0,0,this._dynamicProperties)),e.s=PropertyFactory.getTextSelectorProp(this._elem,s.s,this._dynamicProperties),e.s.t=s.s.t,this._animatorsData[a]=e;this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this._dynamicProperties),l:r(this._elem,this._textData.p.l,0,0,this._dynamicProperties),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this._dynamicProperties),this._dynamicProperties.length&&t.push(this)},TextAnimatorProperty.prototype.getMeasures=function(t,a){if(this.lettersChangedFlag=a,this.mdf||this._firstFrame||a||this._hasMaskedPath&&this._pathData.m.mdf){this._firstFrame=!1;var e,s,i,r,n=this._moreOptions.alignment.v,h=this._animatorsData,o=this._textData,l=this.mHelper,p=this._renderType,d=this.renderedLetters.length,m=(this.data,t.l);if(this._hasMaskedPath){var f=this._pathData.m;if(!this._pathData.n||this._pathData.mdf){var g=f.v;this._pathData.r&&(g=reversePath(g));var _,v={tLength:0,segments:[]};r=g._length-1;var c=0;for(i=0;i<r;i+=1)_={s:g.v[i],e:g.v[i+1],to:[g.o[i][0]-g.v[i][0],g.o[i][1]-g.v[i][1]],ti:[g.i[i+1][0]-g.v[i+1][0],g.i[i+1][1]-g.v[i+1][1]]},bez.buildBezierData(_),v.tLength+=_.bezierData.segmentLength,v.segments.push(_),c+=_.bezierData.segmentLength;i=r,f.v.c&&(_={s:g.v[i],e:g.v[0],to:[g.o[i][0]-g.v[i][0],g.o[i][1]-g.v[i][1]],ti:[g.i[0][0]-g.v[0][0],g.i[0][1]-g.v[0][1]]},bez.buildBezierData(_),v.tLength+=_.bezierData.segmentLength,v.segments.push(_),c+=_.bezierData.segmentLength),this._pathData.pi=v}v=this._pathData.pi;var y,P,u,D=this._pathData.f.v,x=0,M=1,b=0,k=!0,A=v.segments;if(D<0&&f.v.c)for(v.tLength<Math.abs(D)&&(D=-Math.abs(D)%v.tLength),M=(u=A[x=A.length-1].bezierData.points).length-1;D<0;)D+=u[M].partialLength,(M-=1)<0&&(M=(u=A[x-=1].bezierData.points).length-1);P=(u=A[x].bezierData.points)[M-1];var L,C,T=(y=u[M]).partialLength}r=m.length,e=0,s=0;var z,I,w,F,R=1.2*t.s*.714,B=!0;if(w=h.length,a)for(I=0;I<w;I+=1)h[I].s.getValue(!0);var W,S,G,O,j,H,V,X,Y,Z,q,E,J,K=-1,N=D,Q=x,U=M,$=-1,tt="",at=this.defaultPropsArray;for(i=0;i<r;i+=1){if(l.reset(),j=1,m[i].n)e=0,s+=t.yOffset,s+=B?1:0,D=N,B=!1,0,this._hasMaskedPath&&(M=U,P=(u=A[x=Q].bezierData.points)[M-1],T=(y=u[M]).partialLength,b=0),J=Z=E=tt="",at=this.defaultPropsArray;else{if(this._hasMaskedPath){if($!==m[i].line){switch(t.j){case 1:D+=c-t.lineWidths[m[i].line];break;case 2:D+=(c-t.lineWidths[m[i].line])/2}$=m[i].line}K!==m[i].ind&&(m[K]&&(D+=m[K].extra),D+=m[i].an/2,K=m[i].ind),D+=n[0]*m[i].an/200;var et=0;for(I=0;I<w;I+=1)"p"in(z=h[I].a)&&((W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars)).length?et+=z.p.v[0]*W[0]:et+=z.p.v[0]*W),"a"in z&&((W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars)).length?et+=z.a.v[0]*W[0]:et+=z.a.v[0]*W);for(k=!0;k;)b+T>=D+et||!u?(L=(D+et-b)/y.partialLength,G=P.point[0]+(y.point[0]-P.point[0])*L,O=P.point[1]+(y.point[1]-P.point[1])*L,l.translate(-n[0]*m[i].an/200,-n[1]*R/100),k=!1):u&&(b+=y.partialLength,(M+=1)>=u.length&&(M=0,A[x+=1]?u=A[x].bezierData.points:f.v.c?(M=0,u=A[x=0].bezierData.points):(b-=y.partialLength,u=null)),u&&(P=y,T=(y=u[M]).partialLength));S=m[i].an/2-m[i].add,l.translate(-S,0,0)}else S=m[i].an/2-m[i].add,l.translate(-S,0,0),l.translate(-n[0]*m[i].an/200,-n[1]*R/100,0);for(m[i].l/2,I=0;I<w;I+=1)"t"in(z=h[I].a)&&(W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars),this._hasMaskedPath?W.length?D+=z.t*W[0]:D+=z.t*W:W.length?e+=z.t.v*W[0]:e+=z.t.v*W);for(m[i].l/2,t.strokeWidthAnim&&(V=t.sw||0),t.strokeColorAnim&&(H=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(X=[t.fc[0],t.fc[1],t.fc[2]]),I=0;I<w;I+=1)"a"in(z=h[I].a)&&((W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars)).length?l.translate(-z.a.v[0]*W[0],-z.a.v[1]*W[1],z.a.v[2]*W[2]):l.translate(-z.a.v[0]*W,-z.a.v[1]*W,z.a.v[2]*W));for(I=0;I<w;I+=1)"s"in(z=h[I].a)&&((W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars)).length?l.scale(1+(z.s.v[0]-1)*W[0],1+(z.s.v[1]-1)*W[1],1):l.scale(1+(z.s.v[0]-1)*W,1+(z.s.v[1]-1)*W,1));for(I=0;I<w;I+=1){if(z=h[I].a,W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars),"sk"in z&&(W.length?l.skewFromAxis(-z.sk.v*W[0],z.sa.v*W[1]):l.skewFromAxis(-z.sk.v*W,z.sa.v*W)),"r"in z&&(W.length?l.rotateZ(-z.r.v*W[2]):l.rotateZ(-z.r.v*W)),"ry"in z&&(W.length?l.rotateY(z.ry.v*W[1]):l.rotateY(z.ry.v*W)),"rx"in z&&(W.length?l.rotateX(z.rx.v*W[0]):l.rotateX(z.rx.v*W)),"o"in z&&(W.length?j+=(z.o.v*W[0]-j)*W[0]:j+=(z.o.v*W-j)*W),t.strokeWidthAnim&&"sw"in z&&(W.length?V+=z.sw.v*W[0]:V+=z.sw.v*W),t.strokeColorAnim&&"sc"in z)for(Y=0;Y<3;Y+=1)W.length?H[Y]=H[Y]+(z.sc.v[Y]-H[Y])*W[0]:H[Y]=H[Y]+(z.sc.v[Y]-H[Y])*W;if(t.fillColorAnim&&t.fc){if("fc"in z)for(Y=0;Y<3;Y+=1)W.length?X[Y]=X[Y]+(z.fc.v[Y]-X[Y])*W[0]:X[Y]=X[Y]+(z.fc.v[Y]-X[Y])*W;"fh"in z&&(X=W.length?addHueToRGB(X,z.fh.v*W[0]):addHueToRGB(X,z.fh.v*W)),"fs"in z&&(X=W.length?addSaturationToRGB(X,z.fs.v*W[0]):addSaturationToRGB(X,z.fs.v*W)),"fb"in z&&(X=W.length?addBrightnessToRGB(X,z.fb.v*W[0]):addBrightnessToRGB(X,z.fb.v*W))}}for(I=0;I<w;I+=1)"p"in(z=h[I].a)&&(W=h[I].s.getMult(m[i].anIndexes[I],o.a[I].s.totalChars),this._hasMaskedPath?W.length?l.translate(0,z.p.v[1]*W[0],-z.p.v[2]*W[1]):l.translate(0,z.p.v[1]*W,-z.p.v[2]*W):W.length?l.translate(z.p.v[0]*W[0],z.p.v[1]*W[1],-z.p.v[2]*W[2]):l.translate(z.p.v[0]*W,z.p.v[1]*W,-z.p.v[2]*W));if(t.strokeWidthAnim&&(Z=V<0?0:V),t.strokeColorAnim&&(q="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),t.fillColorAnim&&t.fc&&(E="rgb("+Math.round(255*X[0])+","+Math.round(255*X[1])+","+Math.round(255*X[2])+")"),this._hasMaskedPath){if(l.translate(0,-t.ls),l.translate(0,n[1]*R/100+s,0),o.p.p){C=(y.point[1]-P.point[1])/(y.point[0]-P.point[0]);var st=180*Math.atan(C)/Math.PI;y.point[0]<P.point[0]&&(st+=180),l.rotate(-st*Math.PI/180)}l.translate(G,O,0),D-=n[0]*m[i].an/200,m[i+1]&&K!==m[i+1].ind&&(D+=m[i].an/2,D+=t.tr/1e3*t.s)}else{switch(l.translate(e,s,0),t.ps&&l.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:l.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[m[i].line]),0,0);break;case 2:l.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[m[i].line])/2,0,0)}l.translate(0,-t.ls),l.translate(S,0,0),l.translate(n[0]*m[i].an/200,n[1]*R/100,0),e+=m[i].l+t.tr/1e3*t.s}"html"===p?tt=l.toCSS():"svg"===p?tt=l.to2dCSS():at=[l.props[0],l.props[1],l.props[2],l.props[3],l.props[4],l.props[5],l.props[6],l.props[7],l.props[8],l.props[9],l.props[10],l.props[11],l.props[12],l.props[13],l.props[14],l.props[15]],J=j}d<=i?(F=new LetterProps(J,Z,q,E,tt,at),this.renderedLetters.push(F),d+=1,this.lettersChangedFlag=!0):(F=this.renderedLetters[i],this.lettersChangedFlag=F.update(J,Z,q,E,tt,at)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){if(this._elem.globalData.frameId!==this._frameId){this._frameId=this._elem.globalData.frameId;var t,a=this._dynamicProperties.length;for(this.mdf=!1,t=0;t<a;t+=1)this._dynamicProperties[t].getValue(),this.mdf=this._dynamicProperties[t].mdf||this.mdf}},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[];
//# sourceMappingURL=/sm/558bd491dfdc54635c117f1e64e8059daea0d8ce45a6e346ec4f17a884f746d6.map