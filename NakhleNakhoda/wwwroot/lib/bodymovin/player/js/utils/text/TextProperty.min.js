/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/bodymovin@4.13.0/player/js/utils/text/TextProperty.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
function TextProperty(t,e,s){this._frameId=-99999,this.pv="",this.v="",this.kf=!1,this.firstFrame=!0,this.mdf=!0,this.data=e,this.elem=t,this.keysIndex=-1,this.currentData={ascent:0,boxWidth:[0,0],f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,__complete:!1},this.searchProperty()?s.push(this):this.getValue(!0)}TextProperty.prototype.setCurrentData=function(t){var e=this.currentData;e.ascent=t.ascent,e.boxWidth=t.boxWidth?t.boxWidth:e.boxWidth,e.f=t.f,e.fStyle=t.fStyle,e.fWeight=t.fWeight,e.fc=t.fc,e.j=t.j,e.justifyOffset=t.justifyOffset,e.l=t.l,e.lh=t.lh,e.lineWidths=t.lineWidths,e.ls=t.ls,e.of=t.of,e.s=t.s,e.sc=t.sc,e.sw=t.sw,e.t=t.t,e.tr=t.tr,e.fillColorAnim=t.fillColorAnim||e.fillColorAnim,e.strokeColorAnim=t.strokeColorAnim||e.strokeColorAnim,e.strokeWidthAnim=t.strokeWidthAnim||e.strokeWidthAnim,e.yOffset=t.yOffset,e.__complete=!1},TextProperty.prototype.searchProperty=function(){return this.kf=this.data.d.k.length>1,this.kf},TextProperty.prototype.getValue=function(){this.mdf=!1;var t=this.elem.globalData.frameId;if(t!==this._frameId&&this.kf||this.firstFrame){for(var e,s=this.data.d.k,a=0,i=s.length;a<=i-1&&(e=s[a].s,!(a===i-1||s[a+1].t>t));)a+=1;this.keysIndex!==a&&(e.__complete||this.completeTextData(e),this.setCurrentData(e),this.mdf=!this.firstFrame,this.pv=this.v=this.currentData.t,this.keysIndex=a),this._frameId=t}},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,s,a,i,r,f,o,h=this.elem.globalData.fontManager,l=this.data,n=[],c=0,d=l.m.g,m=0,y=0,u=0,p=[],x=0,k=0,g=h.getFontByName(t.f),b=0,A=g.fStyle.split(" "),W="normal",v="normal";for(s=A.length,e=0;e<s;e+=1)switch(A[e].toLowerCase()){case"italic":v="italic";break;case"bold":W="700";break;case"black":W="900";break;case"medium":W="500";break;case"regular":case"normal":W="400";case"light":case"thin":W="200"}t.fWeight=W,t.fStyle=v,s=t.t.length;var C=t.tr/1e3*t.s;if(t.sz){var I=t.sz[0],D=-1;for(e=0;e<s;e+=1)a=!1," "===t.t.charAt(e)?D=e:13===t.t.charCodeAt(e)&&(x=0,a=!0),h.chars?(o=h.getCharData(t.t.charAt(e),g.fStyle,g.fFamily),b=a?0:o.w*t.s/100):b=h.measureText(t.t.charAt(e),t.f,t.s),x+b>I&&" "!==t.t.charAt(e)?(-1===D?s+=1:e=D,t.t=t.t.substr(0,e)+"\r"+t.t.substr(e===D?e+1:e),D=-1,x=0):(x+=b,x+=C);s=t.t.length}x=-C,b=0;var _,j=0;for(e=0;e<s;e+=1)if(a=!1," "===(_=t.t.charAt(e))?i=" ":13===_.charCodeAt(0)?(j=0,p.push(x),k=x>k?x:k,x=-2*C,i="",a=!0,u+=1):i=t.t.charAt(e),h.chars?(o=h.getCharData(_,g.fStyle,h.getFontByName(t.f).fFamily),b=a?0:o.w*t.s/100):b=h.measureText(i,t.f,t.s)," "===_?j+=b+C:(x+=b+C+j,j=0),n.push({l:b,an:b,add:m,n:a,anIndexes:[],val:i,line:u}),2==d){if(m+=b,""==i||" "==i||e==s-1){for(""!=i&&" "!=i||(m-=b);y<=e;)n[y].an=m,n[y].ind=c,n[y].extra=b,y+=1;c+=1,m=0}}else if(3==d){if(m+=b,""==i||e==s-1){for(""==i&&(m-=b);y<=e;)n[y].an=m,n[y].ind=c,n[y].extra=b,y+=1;m=0,c+=1}}else n[c].ind=c,n[c].extra=0,c+=1;if(t.l=n,k=x>k?x:k,p.push(x),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=k,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=p;var O,T,w=l.a;f=w.length;var F,P,S=[];for(r=0;r<f;r+=1){for((O=w[r]).a.sc&&(t.strokeColorAnim=!0),O.a.sw&&(t.strokeWidthAnim=!0),(O.a.fc||O.a.fh||O.a.fs||O.a.fb)&&(t.fillColorAnim=!0),P=0,F=O.s.b,e=0;e<s;e+=1)(T=n[e]).anIndexes[r]=P,(1==F&&""!=T.val||2==F&&""!=T.val&&" "!=T.val||3==F&&(T.n||" "==T.val||e==s-1)||4==F&&(T.n||e==s-1))&&(1===O.s.rn&&S.push(P),P+=1);l.a[r].s.totalChars=P;var z,M=-1;if(1===O.s.rn)for(e=0;e<s;e+=1)M!=(T=n[e]).anIndexes[r]&&(M=T.anIndexes[r],z=S.splice(Math.floor(Math.random()*S.length),1)[0]),T.anIndexes[r]=z}t.yOffset=t.lh||1.2*t.s,t.ls=t.ls||0,t.ascent=g.ascent*t.s/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var s=this.data.d.k[e].s;s.__complete=!1,s.t=t.t,this.keysIndex=-1,this.firstFrame=!0,this.getValue()};
//# sourceMappingURL=/sm/0dff4c62003ed12edd1c1cc214cdbb351375fa1e9202dd6d652a0aab590669d4.map